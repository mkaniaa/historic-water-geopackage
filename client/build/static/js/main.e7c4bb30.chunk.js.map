{"version":3,"sources":["img/flood-mark.png","components/PolygonLayer.js","store/actions/floodMarksActions.js","components/PointLayer.js","store/actions/polyLayersActions.js","components/VectorLayers.js","components/Footer.js","components/Checkbox.js","components/LayersControls.js","components/ToolPanel.js","App.js","serviceWorker.js","store/reducers/polyLayersReducer.js","store/reducers/floodMarksReducer.js","store/reducers/rootReducer.js","index.js"],"names":["module","exports","PolygonLayer","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","key","layer","properties","year","data","style","weight","fillColor","color","fillOpacity","_this2","react_default","a","createElement","GeoJSON","nextProps","prevState","Component","getFloodMarksFromBase","_ref","asyncToGenerator","regenerator_default","mark","_callee","dispatch","wrap","_context","prev","next","axios","get","then","response","floodMarks","features","type","flood_marks","catch","err","stop","_x","apply","arguments","floodMarkIcon","L","icon","iconUrl","iconAnchor","popupAnchor","shadowUrl","iconShadow","shadowAnchor","PointLayer","handleIndexClick","index","setTimelineValues","_this$props","currentDate","floodDates","timelineVisible","valueTimeline","timeline","className","react_horizontal_timeline_default","indexClick","values","marksOnMap","map","feature","flood_date","Marker","geometry","coordinates","join","position","Popup","connect","checkFloodMarks","polyLayers","checkboxes","flood_marks_check","flood_dates","current_date","visible","value","floodIndex","newValueTimeline","getPolygonLayersFromBase","layers","VectorLayers","readRGBA","objectRGBA","setLayersBaseProps","setFloodDates","colors","components_PolygonLayer","components_PointLayer","Card","CardText","objectSpread","Footer","rel","href","Checkbox","label","checked","handleChange","onChange","marginRight","LayersControls","handleLayerCheckboxChange","event","checkLayerCheckbox","target","handleSelectInputChange","changeTimelineVisibility","handleChangeHuePicker","layerName","changeLayerColor","handleChangeAlphaPicker","changeLayerAlpha","components_Checkbox","Input","name","id","disabled","lib","layer_name","target_value","target_checked","ToolPanel","collapse","toggleCollapseLayersList","setState","body","CardTitle","Button","onClick","marginBottom","Collapse","isOpen","components_LayersControls","App","location","lat","lng","zoom","Map","center","TileLayer","url","attribution","opacity","components_VectorLayers","components_ToolPanel","components_Footer","Boolean","window","hostname","match","polyLayersReducer","length","undefined","action","console","log","newColor","update","defineProperty","r","$set","rgb","g","b","newAlpha","baseColor","layerProps","forEach","getLayersProperties","initState","prev_value","getArrayOfFloodDates","objectsWithDates","unsortedSet","Set","object","add","Array","from","sort","floodMarksReducer","floods_dates","rootReducer","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","render","es","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e7c4bb30.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAF3AAABdwB9uetrwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARnSURBVEiJvZX5b1RVFMe/572xFgIVIioUOtSoZdEAxh/cEtC4JC6JVsKPTfwbTGdoxUiIS9CAUaOJmhgTEokxogKlVbRWBEJkSbUz007nzfam09IChS4zfdt99/gDfWVauswA9fvLfTnn3PN533tv7iVmRvXL7z8NqZaDJQEAVIVUlsSsEJTxkSWxSlfzzAQmUpgJChGYiL3v8TyDCMykKERgSWCFWJEkJeJ6c+NJ3wMvfriKSG29p3LZiErEAAAiEAAmkHI1ABDAXoaAiZGZQARgfPC+yOvD5OVyecN3ZXA4BWCdT2sOZmtq9x6r8q/Y4vdXjk+dH508fnbYtp13AUABAMtx6sOh2Cgzzxt0ZDiHy4NDY/qi+76bAOtNDeekEGczmb55I0dCsRFbiLf4+23uBBgALEvURzpiuflwPTqax8VLg8a9eWufF5sAp5sb2l0pT8+H685wbFQKuautbafwYr7CAse26iMh7ZjfX1lBdO2cLV9Sjgf9d2DZ4ttR5lNwJn4Z0d6RoqD53BgG+getBQvNrwvjNHVpa2r3Ht24ce0z/uqVCgA8VnMnah9dBZ86+cD/kx7Ct3/pkPL6BVpQpgIADNvFmb87cn2Z/h3xI8FPC2uUqZOEEIFwKJZnZjz10N3Y9kQVfCpBv5jH7x0DON51EVIyNlUvQd3m1VCVyT+0YukCNG5dh8Ara2EYBvrPX7DdMeOrqRzf1EDy8PZ/a2o/OtWj9z37+Nb1CgC0dgygpf08vMVJDuRRt3k1NlQvweuqgp9P9+I2H2Htygq88PBy+FQFiSs5dEXieenK3am2neacYAAQphkIh2Infji1ZvHSRWU4rV2elO9ID2EfM+q2VGN9VQXWV1VMyif6c/iyJYpsz4BjkPH5dIzr9tjTmlf3tGzYtO55b6+n0/3LF+GlRyrhv2shbCFxacRCe+oK2sIX0H4uMqbrvbvjB4PvTDd3WscA4Ao7EA51P1m1unJx4QkvVLw/h0+OxFBepsKyXXgWTNNCJnPe8QEfz9R/RjfxpjfDUvKJTLpXzlTjySyAAkB3NGWwxGfRg8HRksEAYBoiEIloJd1mtmVDT/UIV83vma1uVrD+y/aIFO4JPZ2d07WnWHfKItAXqZ92Dt0wGABM2wlEQlq+GNeO7SCV7LHHVOeDuWrnBOvNjZ2S+VgxrjUtbQP4Jvtj4+BNgwHAdtxgJKTlp7sePTmOQELL2NLAe8X0LAqcbgp2SZZ/ZmZxHdd0B4T98V/rL9wyMAA4rhOMhOO56VwL4SKupS1TuruK7Vc0OHWoMcos/9DTWXdqLpHQBQEHMgeDfbccDACO6TZ0hrWxQteu60KLpk3hirdL6VUSONkS7GbmVj11zXUq0eOCuSlxaHtm3sAAIIQMdkbieSkZUkpEo0nDFM6OUvuUDE4cDmiS3d/0VNZNJ7MSoKN6U0Oy1D4zvk6zSRqioTOiPQciRVhm4430mPE9nks1tXv3qwqVdx1447X/FXyz+g9p9WLg6I4JxQAAAABJRU5ErkJggg==\"","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { GeoJSON } from 'react-leaflet';\n\nclass PolygonLayer extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            key: this.props.layer.properties.year,\n            data: this.props.layer,\n            style: {\n                weight: 0,\n                fillColor: this.props.color,\n                fillOpacity: this.props.color,\n            },\n        }\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState){\n        if(nextProps.color!==prevState.style.fillColor){\n            return {style: {\n                weight: 0,\n                fillColor : nextProps.color,\n                fillOpacity : nextProps.color\n            }}\n        }\n        else return null;\n    }\n\n    render(){\n\n        return (\n            <GeoJSON\n                key={ this.state.key }\n                data={ this.state.data }\n                style={() => {return ({\n                    weight: 0,\n                    fillColor: this.state.style.fillColor,\n                    fillOpacity: this.state.style.fillOpacity})}}\n            />\n        );\n    }\n}\n\nPolygonLayer.propTypes = {\n    layer: PropTypes.shape().isRequired,\n    color: PropTypes.string.isRequired\n};\n\nexport default PolygonLayer;\n","import axios from 'axios';\r\n\r\n//Sending request for getting flood marks from Geopackage data base (from php server)\r\nexport const getFloodMarksFromBase = async (dispatch) => {\r\n    await axios.get(`http://keyboarders.usermd.net/historic-water-server/GetFloodMarks.php`)\r\n    .then((response) => {\r\n        const floodMarks = response.data.features\r\n        dispatch({ \r\n            type: 'GET_FLOOD_MARKS_SUCCESS',\r\n            flood_marks: floodMarks });\r\n        })\r\n    .catch(err => {\r\n        dispatch({err});\r\n        });\r\n}\r\n\r\n//Setting current and previous value for timeline\r\nexport const setFloodDates = () => {\r\n    return {\r\n        type: 'SET_FLOOD_DATES'\r\n    }\r\n}\r\n\r\n//Setting current and previous value for timeline\r\nexport const setTimelineValues = (floodIndex) => {\r\n    return {\r\n        type: 'SET_TIMELINE_VALUES',\r\n        newValueTimeline: floodIndex\r\n    }\r\n}\r\n\r\n//Making timeline visible if it will be chosen from select list.\r\nexport const changeTimelineVisibility = (value) => {\r\n    if(value==='Linia czasu') {\r\n        return {\r\n            type: 'TIMELINE_VISIBILE'\r\n        }\r\n    } else {\r\n        return {\r\n            type: 'TIMELINE_INVISIBILE'\r\n        }\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport icon from '../img/flood-mark.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\nimport L from 'leaflet';\r\nimport { Marker, Popup} from 'react-leaflet';\r\nimport HorizontalTimeline from 'react-horizontal-timeline';\r\nimport { setTimelineValues } from '../store/actions/floodMarksActions'\r\n\r\nconst floodMarkIcon = L.icon({\r\n    iconUrl: icon,\r\n    iconAnchor: [12.5, 30],\r\n    popupAnchor: [0, -41],\r\n    shadowUrl: iconShadow,\r\n    shadowAnchor: [12.5, 41]\r\n});\r\n\r\nclass PointLayer extends Component \r\n{\r\n    \r\n    handleIndexClick = (index) => {\r\n        this.props.setTimelineValues(index)\r\n    }\r\n\r\n    render() {\r\n        const { floodMarks, currentDate, floodDates, timelineVisible, valueTimeline } = this.props;\r\n\r\n        const timeline =             \r\n            <div className='timeline'>\r\n                <HorizontalTimeline\r\n                    index={ valueTimeline }\r\n                    indexClick={(index) => { this.handleIndexClick(index) }}\r\n                    values={ floodDates }\r\n                />\r\n            </div>\r\n        \r\n        const marksOnMap = timelineVisible ? (\r\n            <div>\r\n                {\r\n                    floodMarks.map((feature, index) => {\r\n                        if(currentDate === feature.properties.flood_date) {\r\n                            return(\r\n                                <Marker \r\n                                    key = {feature.geometry.coordinates.join('_') + '_' + index}\r\n                                    position={[feature.geometry.coordinates[1], feature.geometry.coordinates[0]]}\r\n                                    icon={floodMarkIcon}>\r\n                                    <Popup>{feature.properties.flood_date}<br />{feature.geometry.coordinates[1]}\r\n                                        <br />{feature.geometry.coordinates[0]}</Popup>\r\n                                </Marker>\r\n                            )\r\n                        } else return \"\"\r\n                    })\r\n                }\r\n                { timeline }\r\n            </div>\r\n        ):(\r\n            floodMarks.map((feature, index) => (\r\n                <Marker \r\n                    key = {feature.geometry.coordinates.join('_') + '_' + index}\r\n                    position={[feature.geometry.coordinates[1], feature.geometry.coordinates[0]]}\r\n                    icon={floodMarkIcon}>\r\n                    <Popup>{feature.properties.flood_date}<br />{feature.geometry.coordinates[1]}\r\n                        <br />{feature.geometry.coordinates[0]}</Popup>\r\n                </Marker>\r\n            ))\r\n        )\r\n\r\n        return (\r\n            <div>\r\n                { marksOnMap }\r\n            </div>\r\n        ) \r\n    }   \r\n}\r\n\r\n//Connecting with redux state\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        checkFloodMarks: state.polyLayers.checkboxes.flood_marks_check,\r\n        floodMarks: state.floodMarks.flood_marks,\r\n        floodDates: state.floodMarks.flood_dates,\r\n        currentDate: state.floodMarks.timeline.current_date,\r\n        timelineVisible: state.floodMarks.timeline.visible,\r\n        valueTimeline: state.floodMarks.timeline.value\r\n    }\r\n}\r\n\r\n//Connecting with redux actions(functions)\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setTimelineValues: (floodIndex) => dispatch(setTimelineValues(floodIndex))\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PointLayer);\r\n","import axios from 'axios';\r\n\r\n//Setting new color to state of chosen layer.\r\nexport const changeLayerColor = (layerName, color) => {\r\n    return {\r\n        type: 'SET_LAYER_COLOR',\r\n        layer_name: layerName,\r\n        color\r\n    }\r\n}\r\n\r\n//Setting new alpha to state of chosen layer.\r\nexport const changeLayerAlpha = (layerName, color) => {\r\n    return {\r\n        type: 'SET_LAYER_ALPHA',\r\n        layer_name: layerName,\r\n        color\r\n    }\r\n}\r\n\r\n//Setting visibility on layer by it's checkbox\r\nexport const checkLayerCheckbox = (value, checked) => {\r\n    return {\r\n        type: 'CHECK_LAYER_CHECKBOX',\r\n        target_value: value,\r\n        target_checked: checked\r\n    }\r\n}\r\n\r\n//Sending request for getting polygon layers from Geopackage data base (from php server)\r\nexport const getPolygonLayersFromBase = async (dispatch) => {\r\n    await axios.get(`http://keyboarders.usermd.net/historic-water-server/GetPolygonLayers.php`)\r\n    .then((response) => {\r\n        const layers = response.data\r\n        dispatch({ \r\n            type: 'GET_POLYGON_LAYERS_SUCCESS',\r\n            layers });\r\n        })\r\n    .catch(err => {\r\n        dispatch({err});\r\n        });\r\n};\r\n\r\nexport const setLayersBaseProps = () => {\r\n    return {type: 'SET_BASE_PROPS'}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PolygonLayer from './PolygonLayer'\r\nimport PointLayer from './PointLayer'\r\nimport { connect } from 'react-redux'\r\nimport { Card, CardText } from 'reactstrap';\r\nimport { getFloodMarksFromBase, setFloodDates } from '../store/actions/floodMarksActions'\r\nimport { getPolygonLayersFromBase, setLayersBaseProps } from '../store/actions/polyLayersActions'\r\n\r\nclass VectorLayers extends Component {\r\n\r\n    //Sending request for getting data from Geopackage data base (from php server)\r\n    componentDidMount() {\r\n        this.props.getPolygonLayersFromBase();\r\n        this.props.getFloodMarksFromBase();\r\n    }\r\n\r\n    //setting base props for layers and flood_dates if they're null\r\n    componentDidUpdate() {  \r\n        if(this.props.layers && !this.props.checkboxes) {\r\n            this.props.setLayersBaseProps();\r\n            this.props.setFloodDates();\r\n        }\r\n    }\r\n    \r\n    //converting object RGBA to string code RGBA ({r: 5, g: 5, b: 5, a: 1} => rgba(5,5,5,1))\r\n    readRGBA = (objectRGBA) => {\r\n        const arrayRGBA = Object.values(objectRGBA);\r\n        return 'rgba(' + arrayRGBA.join(', ') + ')';\r\n    }\r\n\r\n    render() {\r\n\r\n        const { layers, colors, checkboxes } = this.props;\r\n\r\n        //Rendering only when layers from database are downloaded and ready.\r\n        if (!checkboxes) {\r\n            return (\r\n                <Card className = \"loading-layers\">\r\n                    <CardText>\r\n                        Loading layers from database...\r\n                    </CardText>                \r\n                </Card>\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n                {\r\n                    //adding polygon-layers to map\r\n                    layers.map((layer) => (\r\n                        checkboxes[layer.properties.year] && (\r\n                            <PolygonLayer\r\n                                key={ layer.properties.year }\r\n                                layer={ layer }\r\n                                color={ this.readRGBA(colors[layer.properties.year]) }\r\n                            />\r\n                            )\r\n                    ))\r\n                }\r\n                { //show point-layer flood dates only if it's checked\r\n                    checkboxes.flood_marks_check && ( <PointLayer /> )\r\n                }\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//Connecting with redux state\r\nconst mapStateToProps = (state) => ({\r\n    ...state.polyLayers\r\n})\r\n\r\n//Connecting with redux actions(functions)\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        getPolygonLayersFromBase: () => dispatch(getPolygonLayersFromBase),\r\n        getFloodMarksFromBase: () => dispatch(getFloodMarksFromBase),\r\n        setLayersBaseProps: () => dispatch(setLayersBaseProps()),\r\n        setFloodDates: () => dispatch(setFloodDates())\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VectorLayers)","import React from 'react';\nimport { Card, CardText } from 'reactstrap';\n\nconst Footer = () => (\n    <Card className = \"footer-license\">\n        <CardText>\n            Historic Water created by Marek Kania is licensed under a \n            <a rel=\"license\" href=\"https://github.com/mkaniaa/historic-water/blob/master/LICENSE\"> GNU GENERAL PUBLIC LICENSE</a>\n        </CardText>                \n    </Card>\n);\n\nexport default Footer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Checkbox = ({ value, label, checked, handleChange }) => (\n    <div className=\"checkbox\">\n        <label>\n            <input\n              type=\"checkbox\"\n              value={ value }\n              checked={ checked }\n              onChange={ handleChange }\n              style={ { marginRight: '12px' } }\n            />\n           { label }\n        </label>\n    </div>\n);\n\nCheckbox.propTypes = {\n    value: PropTypes.string.isRequired,\n    label: PropTypes.string.isRequired,\n    checked: PropTypes.bool.isRequired,\n    handleChange: PropTypes.func.isRequired,\n};\n\nexport default Checkbox;\n","import React, { Component } from 'react';\r\nimport Checkbox from './Checkbox'\r\nimport {HuePicker, AlphaPicker} from 'react-color'\r\nimport { Input } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport { changeTimelineVisibility } from '../store/actions/floodMarksActions'\r\nimport { checkLayerCheckbox, changeLayerColor, changeLayerAlpha } from '../store/actions/polyLayersActions'\r\n\r\nclass LayersControls extends Component {\r\n\r\n    handleLayerCheckboxChange = (event) => {\r\n        this.props.checkLayerCheckbox(event.target.value, event.target.checked);\r\n    }\r\n\r\n    handleSelectInputChange = (event) => {\r\n        this.props.changeTimelineVisibility(event.target.value);\r\n    }\r\n\r\n    handleChangeHuePicker = (layerName) => (color) => {\r\n        this.props.changeLayerColor(layerName, color);\r\n    }\r\n\r\n    handleChangeAlphaPicker = (layerName) => (color) => {\r\n        this.props.changeLayerAlpha(layerName, color);\r\n    }\r\n\r\n    render() {\r\n\r\n        const { layers, checkboxes, colors } = this.props;\r\n\r\n        return(\r\n            <div className=\"layers-controls\">\r\n\r\n                {//Controls for flood marks point-layer\r\n                    <div className='layers-controls'>\r\n                        <Checkbox\r\n                            value={ 'flood_marks_check' }\r\n                            label={ 'Znaki wielkiej wody' }\r\n                            handleChange={ this.handleLayerCheckboxChange }\r\n                            checked={ checkboxes.flood_marks_check }\r\n                        />\r\n                        <Input \r\n                            type=\"select\" \r\n                            name=\"selectFloodMarks\" \r\n                            id=\"selectFloodMarks\" \r\n                            onChange={ this.handleSelectInputChange }\r\n                            disabled={ !checkboxes.flood_marks_check } >\r\n                                <option>Pokaż wszystkie</option>\r\n                                <option>Linia czasu</option>\r\n                        </Input>\r\n                    </div>\r\n                }\r\n                \r\n                {//Controls for all polygon-layers\r\n                    layers.map((layer, index) => (\r\n                        <div key= { index }>\r\n                            <Checkbox\r\n                                value={ layer.properties.year }\r\n                                label={ layer.properties.year }\r\n                                handleChange={ this.handleLayerCheckboxChange }\r\n                                checked={ checkboxes[layer.properties.year] }\r\n                                key={ layer.properties.year + '_checkbox' }\r\n                            />\r\n                            <HuePicker\r\n                                className='layer-changer'\r\n                                color={ colors[layer.properties.year]}\r\n                                onChange={ this.handleChangeHuePicker(layer.properties.year) }\r\n                            />\r\n                            <AlphaPicker\r\n                                className='layer-changer'\r\n                                color={ colors[layer.properties.year] }\r\n                                onChange={ this.handleChangeAlphaPicker(layer.properties.year) }\r\n                            />\r\n                            <br />\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    ...state.polyLayers\r\n})\r\n\r\n//Connecting with redux actions(functions)\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeLayerColor: (layerName, color) => dispatch(changeLayerColor(layerName, color)),\r\n        changeLayerAlpha: (layerName, color) => dispatch(changeLayerAlpha(layerName, color)),\r\n        checkLayerCheckbox: (value, checked) => dispatch(checkLayerCheckbox(value, checked)),\r\n        changeTimelineVisibility: (value) => dispatch(changeTimelineVisibility(value))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersControls);\r\n","import React, {Component} from 'react'\r\nimport { Collapse, Button, Card, CardTitle, CardText } from 'reactstrap';\r\nimport LayersControls from './LayersControls';\r\nimport { connect } from 'react-redux';\r\n\r\nclass ToolPanel extends Component {\r\n\r\n    state = {\r\n        collapse: false\r\n    }\r\n\r\n   //Changing state of collapse if toolpanel is expanded or not.\r\n   toggleCollapseLayersList = () => {\r\n        this.setState({ \r\n            collapse: !this.state.collapse });\r\n    }\r\n\r\n    render() {\r\n        const { checkboxes } = this.props;\r\n\r\n        //Rendering controls only when layers from database are downloaded and ready.\r\n        if (!checkboxes) {\r\n            return (\r\n                <Card body className='layers-card'>\r\n                    <CardTitle>HISTORIC WATER</CardTitle>\r\n                    <CardText>Historyczna hydrografia Krakowa</CardText>\r\n                    <Button \r\n                        color=\"primary\" \r\n                        onClick={this.toggleCollapseLayersList} \r\n                        style={{ marginBottom: '1rem' }}\r\n                        disabled={true}>\r\n                        {this.state.collapse ? 'Ukryj listę warstw' : 'Pokaż listę warstw'}\r\n                    </Button>\r\n                </Card> \r\n            )} else {\r\n                return (\r\n                    <Card body className='layers-card'>\r\n                        <CardTitle>HISTORIC WATER</CardTitle>\r\n                        <CardText>Historyczna hydrografia Krakowa</CardText>\r\n                        <Button \r\n                            color=\"primary\" \r\n                            onClick={this.toggleCollapseLayersList} \r\n                            style={{ marginBottom: '1rem' }}>\r\n                            {this.state.collapse ? 'Ukryj listę warstw' : 'Pokaż listę warstw'}\r\n                        </Button>\r\n                        <Collapse isOpen={this.state.collapse}>\r\n                            <LayersControls />\r\n                        </Collapse>\r\n                    </Card> \r\n                );\r\n            }\r\n            \r\n        }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        checkboxes: state.polyLayers.checkboxes\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ToolPanel);","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport VectorLayers from './components/VectorLayers'\r\nimport Footer from './components/Footer'\r\nimport ToolPanel from './components/ToolPanel';\r\nimport { Map, TileLayer} from 'react-leaflet';\r\n\r\nclass App extends Component {\r\n\r\n    state = {\r\n        location: {\r\n            lat: 50.06,\r\n            lng: 19.94,\r\n        },\r\n        zoom: 13.5\r\n    }\r\n\r\n    render() {\r\n        const position = [this.state.location.lat, this.state.location.lng];\r\n        return (               \r\n            <div className='map'>\r\n                <Map className='map' center={ position } zoom={ this.state.zoom }>\r\n                    <TileLayer className='main-map'\r\n                        url='https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png'\r\n                        attribution='Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a> \r\n                            &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                        opacity='1'\r\n                    />\r\n                    <VectorLayers /> \r\n                </Map>\r\n                <ToolPanel/>\r\n                <Footer />  \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import update from 'immutability-helper';\r\n\r\n//Returning base props for vector layers (color, visibility(checkbox: false))\r\nconst getLayersProperties = (layers) => {\r\n    const baseColor = {r: 50, g: 50, b: 255, a: 1}\r\n    \r\n    //checking if layers exists\r\n    if (!layers || !layers.length) return {};\r\n\r\n    //empty new state\r\n    const layerProps = {}\r\n    \r\n    //filling newState\r\n    layers.forEach((layer) => {\r\n        layerProps.colors = {\r\n            ...layerProps.colors,\r\n            [layer.properties.year]: baseColor\r\n        }\r\n        layerProps.checkboxes = {\r\n            ...layerProps.checkboxes,\r\n            [layer.properties.year]: false\r\n        }\r\n    })\r\n\r\n    //add flood_marks checkbox\r\n    layerProps.checkboxes.flood_marks_check = false;\r\n\r\n    return layerProps\r\n}\r\n\r\nconst polyLayersReducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n        case 'GET_POLYGON_LAYERS_SUCCESS':\r\n            console.log('Downloading polygon layers from the database successfully completed.')\r\n            return {\r\n                ...state,\r\n                layers: action.layers\r\n            }\r\n        case 'SET_LAYER_COLOR': \r\n            const newColor = update(state.colors, {\r\n                [action.layer_name]: {\r\n                        r: {$set: action.color.rgb.r},\r\n                        g: {$set: action.color.rgb.g},\r\n                        b: {$set: action.color.rgb.b},\r\n                    }\r\n            })\r\n            return {\r\n                ...state,\r\n                colors: newColor\r\n            }\r\n        case 'SET_LAYER_ALPHA':\r\n            const newAlpha = update(state.colors, {\r\n                [action.layer_name]: {\r\n                    a: {$set: action.color.rgb.a}\r\n                }\r\n            })\r\n            return {\r\n                ...state,\r\n                colors: newAlpha\r\n            }\r\n        case 'CHECK_LAYER_CHECKBOX':\r\n            return {\r\n                ...state,\r\n                checkboxes: {\r\n                    ...state.checkboxes,\r\n                    [action.target_value]: action.target_checked\r\n                }\r\n            }\r\n        case 'SET_BASE_PROPS':\r\n            return {\r\n                ...state,\r\n                ...getLayersProperties(state.layers)\r\n            }\r\n        default: \r\n            if(action.err) console.log(action.err);\r\n            return {\r\n                ...state\r\n            } \r\n    }\r\n}\r\n\r\nexport default polyLayersReducer","const initState = {\r\n    timeline: {\r\n        visible: false,\r\n        value: 0,\r\n        prev_value: 0,\r\n        current_date: '1593-07-03'\r\n    }\r\n}\r\n\r\n//returning sorted set of floods dates\r\nconst getArrayOfFloodDates = (objectsWithDates) => {\r\n    const unsortedSet = new Set()\r\n    objectsWithDates.forEach((object) => {\r\n        unsortedSet.add(object.properties.flood_date)\r\n    })\r\n    return Array.from(unsortedSet).sort();\r\n}\r\n\r\nconst floodMarksReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case 'GET_FLOOD_MARKS_SUCCESS':\r\n            console.log('Downloading flood marks from the database successfully completed.')\r\n            return {\r\n                ...state,\r\n                flood_marks: action.flood_marks\r\n            }\r\n        case 'SET_FLOOD_DATES':\r\n            return {\r\n                ...state,\r\n                flood_dates: getArrayOfFloodDates(state.flood_marks)\r\n            }\r\n        case 'SET_TIMELINE_VALUES': \r\n            return {\r\n                ...state,\r\n                timeline: {\r\n                    ...state.timeline,\r\n                    value: action.newValueTimeline,\r\n                    prev_value: state.valueTimeline,\r\n                    current_date: state.flood_dates[action.newValueTimeline]\r\n                }\r\n            }\r\n\r\n        case 'TIMELINE_VISIBILE':\r\n            return {\r\n                ...state,\r\n                timeline: {\r\n                    ...state.timeline,\r\n                    visible: true\r\n                }\r\n            }\r\n        case 'TIMELINE_INVISIBILE':\r\n            return {\r\n                ...state,\r\n                timeline: {\r\n                    ...state.timeline,\r\n                    visible: false\r\n                }\r\n            }\r\n        case 'SET_FLOODS_DATES':\r\n            return {\r\n                ...state,\r\n                floods_dates: getArrayOfFloodDates(state.flood_marks)\r\n            }\r\n        default:\r\n            if(action.err) console.log(action.err);\r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}\r\n\r\nexport default floodMarksReducer","import polyLayersReducer from './polyLayersReducer'\r\nimport floodMarksReducer from './floodMarksReducer'\r\nimport { combineReducers } from 'redux'\r\n\r\nconst rootReducer = combineReducers({\r\n    polyLayers: polyLayersReducer,\r\n    floodMarks: floodMarksReducer\r\n});\r\n\r\nexport default rootReducer","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'leaflet/dist/leaflet.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport rootReducer from './store/reducers/rootReducer'\nimport thunk from 'redux-thunk'\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}