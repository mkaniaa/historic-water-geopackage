{"version":3,"sources":["img/flood-mark.png","components/PolygonLayer.js","store/actions/floodMarksActions.js","components/PointLayer.js","store/actions/polyLayersActions.js","components/VectorLayers.js","components/Footer.js","components/Checkbox.js","components/LayersControls.js","components/ToolPanel.js","App.js","serviceWorker.js","store/reducers/polyLayersReducer.js","store/reducers/floodMarksReducer.js","store/reducers/rootReducer.js","index.js"],"names":["module","exports","PolygonLayer","props","state","key","layer","properties","year","data","style","weight","fillColor","color","fillOpacity","GeoJSON","this","nextProps","prevState","Component","getFloodMarksFromBase","dispatch","a","async","axios","get","then","response","floodMarks","features","type","flood_marks","catch","err","floodMarkIcon","L","icon","iconUrl","iconAnchor","popupAnchor","shadowUrl","iconShadow","shadowAnchor","PointLayer","handleIndexClick","index","setTimelineValues","currentDate","floodDates","timelineVisible","valueTimeline","console","log","geometry","timeline","className","indexClick","values","marksOnMap","map","feature","flood_date","Marker","coordinates","join","position","Popup","connect","checkFloodMarks","polyLayers","checkboxes","flood_marks_check","flood_dates","current_date","visible","value","floodIndex","newValueTimeline","getPolygonLayersFromBase","layers","VectorLayers","readRGBA","objectRGBA","Object","setLayersBaseProps","setFloodDates","colors","Card","CardText","Footer","rel","href","Checkbox","label","checked","handleChange","onChange","marginRight","LayersControls","handleLayerCheckboxChange","event","checkLayerCheckbox","target","handleSelectInputChange","changeTimelineVisibility","handleChangeHuePicker","layerName","changeLayerColor","handleChangeAlphaPicker","changeLayerAlpha","Input","name","id","disabled","layer_name","target_value","target_checked","ToolPanel","collapse","toggleCollapseLayersList","setState","body","CardTitle","Button","onClick","marginBottom","Collapse","isOpen","App","location","lat","lng","zoom","Map","center","TileLayer","url","attribution","opacity","Boolean","window","hostname","match","getLayersProperties","baseColor","r","g","b","length","layerProps","forEach","polyLayersReducer","action","newColor","update","$set","rgb","newAlpha","initState","prev_value","getArrayOfFloodDates","objectsWithDates","unsortedSet","Set","object","add","Array","from","sort","floodMarksReducer","floods_dates","rootReducer","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c73adbb2.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAF3AAABdwB9uetrwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARnSURBVEiJvZX5b1RVFMe/572xFgIVIioUOtSoZdEAxh/cEtC4JC6JVsKPTfwbTGdoxUiIS9CAUaOJmhgTEokxogKlVbRWBEJkSbUz007nzfam09IChS4zfdt99/gDfWVauswA9fvLfTnn3PN533tv7iVmRvXL7z8NqZaDJQEAVIVUlsSsEJTxkSWxSlfzzAQmUpgJChGYiL3v8TyDCMykKERgSWCFWJEkJeJ6c+NJ3wMvfriKSG29p3LZiErEAAAiEAAmkHI1ABDAXoaAiZGZQARgfPC+yOvD5OVyecN3ZXA4BWCdT2sOZmtq9x6r8q/Y4vdXjk+dH508fnbYtp13AUABAMtx6sOh2Cgzzxt0ZDiHy4NDY/qi+76bAOtNDeekEGczmb55I0dCsRFbiLf4+23uBBgALEvURzpiuflwPTqax8VLg8a9eWufF5sAp5sb2l0pT8+H685wbFQKuautbafwYr7CAse26iMh7ZjfX1lBdO2cLV9Sjgf9d2DZ4ttR5lNwJn4Z0d6RoqD53BgG+getBQvNrwvjNHVpa2r3Ht24ce0z/uqVCgA8VnMnah9dBZ86+cD/kx7Ct3/pkPL6BVpQpgIADNvFmb87cn2Z/h3xI8FPC2uUqZOEEIFwKJZnZjz10N3Y9kQVfCpBv5jH7x0DON51EVIyNlUvQd3m1VCVyT+0YukCNG5dh8Ara2EYBvrPX7DdMeOrqRzf1EDy8PZ/a2o/OtWj9z37+Nb1CgC0dgygpf08vMVJDuRRt3k1NlQvweuqgp9P9+I2H2Htygq88PBy+FQFiSs5dEXieenK3am2neacYAAQphkIh2Infji1ZvHSRWU4rV2elO9ID2EfM+q2VGN9VQXWV1VMyif6c/iyJYpsz4BjkPH5dIzr9tjTmlf3tGzYtO55b6+n0/3LF+GlRyrhv2shbCFxacRCe+oK2sIX0H4uMqbrvbvjB4PvTDd3WscA4Ao7EA51P1m1unJx4QkvVLw/h0+OxFBepsKyXXgWTNNCJnPe8QEfz9R/RjfxpjfDUvKJTLpXzlTjySyAAkB3NGWwxGfRg8HRksEAYBoiEIloJd1mtmVDT/UIV83vma1uVrD+y/aIFO4JPZ2d07WnWHfKItAXqZ92Dt0wGABM2wlEQlq+GNeO7SCV7LHHVOeDuWrnBOvNjZ2S+VgxrjUtbQP4Jvtj4+BNgwHAdtxgJKTlp7sePTmOQELL2NLAe8X0LAqcbgp2SZZ/ZmZxHdd0B4T98V/rL9wyMAA4rhOMhOO56VwL4SKupS1TuruK7Vc0OHWoMcos/9DTWXdqLpHQBQEHMgeDfbccDACO6TZ0hrWxQteu60KLpk3hirdL6VUSONkS7GbmVj11zXUq0eOCuSlxaHtm3sAAIIQMdkbieSkZUkpEo0nDFM6OUvuUDE4cDmiS3d/0VNZNJ7MSoKN6U0Oy1D4zvk6zSRqioTOiPQciRVhm4430mPE9nks1tXv3qwqVdx1447X/FXyz+g9p9WLg6I4JxQAAAABJRU5ErkJggg==\"","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { GeoJSON } from 'react-leaflet';\r\n\r\nclass PolygonLayer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            key: this.props.layer.properties.year,\r\n            data: this.props.layer,\r\n            style: {\r\n                weight: 0,\r\n                fillColor: this.props.color,\r\n                fillOpacity: this.props.color,\r\n            },\r\n        }\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState){\r\n        if(nextProps.color!==prevState.style.fillColor){\r\n            return {style: {\r\n                weight: 0,\r\n                fillColor : nextProps.color,\r\n                fillOpacity : nextProps.color\r\n            }}\r\n        }\r\n        else return null;\r\n    }\r\n\r\n    render(){\r\n\r\n        return (\r\n            <GeoJSON\r\n                key={ this.state.key }\r\n                data={ this.state.data }\r\n                style={() => {return ({\r\n                    weight: 0,\r\n                    fillColor: this.state.style.fillColor,\r\n                    fillOpacity: this.state.style.fillOpacity})}}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nPolygonLayer.propTypes = {\r\n    layer: PropTypes.shape().isRequired,\r\n    color: PropTypes.string.isRequired\r\n};\r\n\r\nexport default PolygonLayer;\r\n","import axios from 'axios';\r\n\r\n//Sending request for getting flood marks from Geopackage data base (from php server)\r\nexport const getFloodMarksFromBase = async (dispatch) => {\r\n    await axios.get(`http://mkania.sub.com.pl/app/getFloodMarksCollection.php`)\r\n    .then((response) => {\r\n        const floodMarks = response.data.features\r\n        dispatch({ \r\n            type: 'GET_FLOOD_MARKS_SUCCESS',\r\n            flood_marks: floodMarks });\r\n        })\r\n    .catch(err => {\r\n        dispatch({err});\r\n        });\r\n}\r\n\r\n//Setting current and previous value for timeline\r\nexport const setFloodDates = () => {\r\n    return {\r\n        type: 'SET_FLOOD_DATES'\r\n    }\r\n}\r\n\r\n//Setting current and previous value for timeline\r\nexport const setTimelineValues = (floodIndex) => {\r\n    return {\r\n        type: 'SET_TIMELINE_VALUES',\r\n        newValueTimeline: floodIndex\r\n    }\r\n}\r\n\r\n//Making timeline visible if it will be chosen from select list.\r\nexport const changeTimelineVisibility = (value) => {\r\n    if(value==='Linia czasu') {\r\n        return {\r\n            type: 'TIMELINE_VISIBILE'\r\n        }\r\n    } else {\r\n        return {\r\n            type: 'TIMELINE_INVISIBILE'\r\n        }\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport icon from '../img/flood-mark.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\nimport L from 'leaflet';\r\nimport { Marker, Popup} from 'react-leaflet';\r\nimport HorizontalTimeline from 'react-horizontal-timeline';\r\nimport { setTimelineValues } from '../store/actions/floodMarksActions'\r\n\r\nconst floodMarkIcon = L.icon({\r\n    iconUrl: icon,\r\n    iconAnchor: [12.5, 30],\r\n    popupAnchor: [0, -41],\r\n    shadowUrl: iconShadow,\r\n    shadowAnchor: [12.5, 41]\r\n});\r\n\r\nclass PointLayer extends Component \r\n{\r\n    \r\n    handleIndexClick = (index) => {\r\n        this.props.setTimelineValues(index)\r\n    }\r\n\r\n    render() {\r\n        const { floodMarks, currentDate, floodDates, timelineVisible, valueTimeline } = this.props;\r\n\r\n        console.log(floodMarks[1].geometry)\r\n\r\n        const timeline =             \r\n            <div className='timeline'>\r\n                <HorizontalTimeline\r\n                    index={ valueTimeline }\r\n                    indexClick={(index) => { this.handleIndexClick(index) }}\r\n                    values={ floodDates }\r\n                />\r\n            </div>\r\n        \r\n        const marksOnMap = timelineVisible ? (\r\n            <div>\r\n                {\r\n                    floodMarks.map((feature, index) => {\r\n                        console.log(feature);\r\n                        if(currentDate === feature.properties.flood_date) {\r\n                            return(\r\n                                <Marker \r\n                                    key = {feature.geometry.coordinates.join('_') + '_' + index}\r\n                                    position={[feature.geometry.coordinates[1], feature.geometry.coordinates[0]]}\r\n                                    icon={floodMarkIcon}>\r\n                                    <Popup>{feature.properties.flood_date}<br />{feature.geometry.coordinates[1]}\r\n                                        <br />{feature.geometry.coordinates[0]}</Popup>\r\n                                </Marker>\r\n                            )\r\n                        } else return \"\"\r\n                    })\r\n                }\r\n                { timeline }\r\n            </div>\r\n        ):(\r\n            floodMarks.map((feature, index) => (\r\n                <Marker \r\n                    key = {feature.geometry.coordinates.join('_') + '_' + index}\r\n                    position={[feature.geometry.coordinates[1], feature.geometry.coordinates[0]]}\r\n                    icon={floodMarkIcon}>\r\n                    <Popup>{feature.properties.flood_date}<br />{feature.geometry.coordinates[1]}\r\n                        <br />{feature.geometry.coordinates[0]}</Popup>\r\n                </Marker>\r\n            ))\r\n        )\r\n\r\n        return (\r\n            <div>\r\n                { marksOnMap }\r\n            </div>\r\n        ) \r\n    }   \r\n}\r\n\r\n//Connecting with redux state\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        checkFloodMarks: state.polyLayers.checkboxes.flood_marks_check,\r\n        floodMarks: state.floodMarks.flood_marks,\r\n        floodDates: state.floodMarks.flood_dates,\r\n        currentDate: state.floodMarks.timeline.current_date,\r\n        timelineVisible: state.floodMarks.timeline.visible,\r\n        valueTimeline: state.floodMarks.timeline.value\r\n    }\r\n}\r\n\r\n//Connecting with redux actions(functions)\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setTimelineValues: (floodIndex) => dispatch(setTimelineValues(floodIndex))\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PointLayer);\r\n","import axios from 'axios';\r\n\r\n//Setting new color to state of chosen layer.\r\nexport const changeLayerColor = (layerName, color) => {\r\n    return {\r\n        type: 'SET_LAYER_COLOR',\r\n        layer_name: layerName,\r\n        color\r\n    }\r\n}\r\n\r\n//Setting new alpha to state of chosen layer.\r\nexport const changeLayerAlpha = (layerName, color) => {\r\n    return {\r\n        type: 'SET_LAYER_ALPHA',\r\n        layer_name: layerName,\r\n        color\r\n    }\r\n}\r\n\r\n//Setting visibility on layer by it's checkbox\r\nexport const checkLayerCheckbox = (value, checked) => {\r\n    return {\r\n        type: 'CHECK_LAYER_CHECKBOX',\r\n        target_value: value,\r\n        target_checked: checked\r\n    }\r\n}\r\n\r\n//Sending request for getting polygon layers from Geopackage data base (from php server)\r\nexport const getPolygonLayersFromBase = async (dispatch) => {\r\n    await axios.get(`http://mkania.sub.com.pl/app/getArrayOfPolygonLayers.php`)\r\n    .then((response) => {\r\n        const layers = response.data\r\n        dispatch({ \r\n            type: 'GET_POLYGON_LAYERS_SUCCESS',\r\n            layers });\r\n        })\r\n    .catch(err => {\r\n        dispatch({err});\r\n        });\r\n};\r\n\r\nexport const setLayersBaseProps = () => {\r\n    return {type: 'SET_BASE_PROPS'}\r\n}\r\n","import React, { Component } from 'react'\r\nimport PolygonLayer from './PolygonLayer'\r\nimport PointLayer from './PointLayer'\r\nimport { connect } from 'react-redux'\r\nimport { Card, CardText } from 'reactstrap';\r\nimport { getFloodMarksFromBase, setFloodDates } from '../store/actions/floodMarksActions'\r\nimport { getPolygonLayersFromBase, setLayersBaseProps } from '../store/actions/polyLayersActions'\r\n\r\nclass VectorLayers extends Component {\r\n\r\n    //Sending request for getting data from Geopackage data base (from php server)\r\n    componentDidMount() {\r\n        this.props.getPolygonLayersFromBase();\r\n        this.props.getFloodMarksFromBase();\r\n    }\r\n\r\n    //setting base props for layers and flood_dates if they're null\r\n    componentDidUpdate() {  \r\n        if(this.props.layers && !this.props.checkboxes) {\r\n            this.props.setLayersBaseProps();\r\n            this.props.setFloodDates();\r\n        }\r\n    }\r\n    \r\n    //converting object RGBA to string code RGBA ({r: 5, g: 5, b: 5, a: 1} => rgba(5,5,5,1))\r\n    readRGBA = (objectRGBA) => {\r\n        const arrayRGBA = Object.values(objectRGBA);\r\n        return 'rgba(' + arrayRGBA.join(', ') + ')';\r\n    }\r\n\r\n    render() {\r\n\r\n        const { layers, colors, checkboxes } = this.props;\r\n\r\n        //Rendering only when layers from database are downloaded and ready.\r\n        if (!checkboxes) {\r\n            return (\r\n                <Card className = \"loading-layers\">\r\n                    <CardText>\r\n                        Loading layers from database...\r\n                    </CardText>                \r\n                </Card>\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n                {\r\n                    //adding polygon-layers to map\r\n                    layers.map((layer) => (\r\n                        checkboxes[layer.properties.year] && (\r\n                            <PolygonLayer\r\n                                key={ layer.properties.year }\r\n                                layer={ layer }\r\n                                color={ this.readRGBA(colors[layer.properties.year]) }\r\n                            />\r\n                            )\r\n                    ))\r\n                }\r\n                { //show point-layer flood dates only if it's checked\r\n                    checkboxes.flood_marks_check && ( <PointLayer /> )\r\n                }\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n//Connecting with redux state\r\nconst mapStateToProps = (state) => ({\r\n    ...state.polyLayers\r\n})\r\n\r\n//Connecting with redux actions(functions)\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        getPolygonLayersFromBase: () => dispatch(getPolygonLayersFromBase),\r\n        getFloodMarksFromBase: () => dispatch(getFloodMarksFromBase),\r\n        setLayersBaseProps: () => dispatch(setLayersBaseProps()),\r\n        setFloodDates: () => dispatch(setFloodDates())\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VectorLayers)","import React from 'react';\r\nimport { Card, CardText } from 'reactstrap';\r\n\r\nconst Footer = () => (\r\n    <Card className = \"footer-license\">\r\n        <CardText>\r\n            Historic Water created by Marek Kania is licensed under a \r\n            <a rel=\"license\" href=\"https://github.com/mkaniaa/historic-water/blob/master/LICENSE\"> GNU GENERAL PUBLIC LICENSE</a>\r\n        </CardText>                \r\n    </Card>\r\n);\r\n\r\nexport default Footer;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Checkbox = ({ value, label, checked, handleChange }) => (\r\n    <div className=\"checkbox\">\r\n        <label>\r\n            <input\r\n              type=\"checkbox\"\r\n              value={ value }\r\n              checked={ checked }\r\n              onChange={ handleChange }\r\n              style={ { marginRight: '12px' } }\r\n            />\r\n           { label }\r\n        </label>\r\n    </div>\r\n);\r\n\r\nCheckbox.propTypes = {\r\n    value: PropTypes.string.isRequired,\r\n    label: PropTypes.string.isRequired,\r\n    checked: PropTypes.bool.isRequired,\r\n    handleChange: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Checkbox;\r\n","import React, { Component } from 'react';\r\nimport Checkbox from './Checkbox'\r\nimport {HuePicker, AlphaPicker} from 'react-color'\r\nimport { Input } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport { changeTimelineVisibility } from '../store/actions/floodMarksActions'\r\nimport { checkLayerCheckbox, changeLayerColor, changeLayerAlpha } from '../store/actions/polyLayersActions'\r\n\r\nclass LayersControls extends Component {\r\n\r\n    handleLayerCheckboxChange = (event) => {\r\n        this.props.checkLayerCheckbox(event.target.value, event.target.checked);\r\n    }\r\n\r\n    handleSelectInputChange = (event) => {\r\n        this.props.changeTimelineVisibility(event.target.value);\r\n    }\r\n\r\n    handleChangeHuePicker = (layerName) => (color) => {\r\n        this.props.changeLayerColor(layerName, color);\r\n    }\r\n\r\n    handleChangeAlphaPicker = (layerName) => (color) => {\r\n        this.props.changeLayerAlpha(layerName, color);\r\n    }\r\n\r\n    render() {\r\n\r\n        const { layers, checkboxes, colors } = this.props;\r\n\r\n        return(\r\n            <div className=\"layers-controls\">\r\n\r\n                {//Controls for flood marks point-layer\r\n                    <div className='layers-controls'>\r\n                        <Checkbox\r\n                            value={ 'flood_marks_check' }\r\n                            label={ 'Znaki wielkiej wody' }\r\n                            handleChange={ this.handleLayerCheckboxChange }\r\n                            checked={ checkboxes.flood_marks_check }\r\n                        />\r\n                        <Input \r\n                            type=\"select\" \r\n                            name=\"selectFloodMarks\" \r\n                            id=\"selectFloodMarks\" \r\n                            onChange={ this.handleSelectInputChange }\r\n                            disabled={ !checkboxes.flood_marks_check } >\r\n                                <option>Pokaż wszystkie</option>\r\n                                <option>Linia czasu</option>\r\n                        </Input>\r\n                    </div>\r\n                }\r\n                \r\n                {//Controls for all polygon-layers\r\n                    layers.map((layer, index) => (\r\n                        <div key= { index }>\r\n                            <Checkbox\r\n                                value={ layer.properties.year }\r\n                                label={ layer.properties.year }\r\n                                handleChange={ this.handleLayerCheckboxChange }\r\n                                checked={ checkboxes[layer.properties.year] }\r\n                                key={ layer.properties.year + '_checkbox' }\r\n                            />\r\n                            <HuePicker\r\n                                className='layer-changer'\r\n                                color={ colors[layer.properties.year]}\r\n                                onChange={ this.handleChangeHuePicker(layer.properties.year) }\r\n                            />\r\n                            <AlphaPicker\r\n                                className='layer-changer'\r\n                                color={ colors[layer.properties.year] }\r\n                                onChange={ this.handleChangeAlphaPicker(layer.properties.year) }\r\n                            />\r\n                            <br />\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    ...state.polyLayers\r\n})\r\n\r\n//Connecting with redux actions(functions)\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeLayerColor: (layerName, color) => dispatch(changeLayerColor(layerName, color)),\r\n        changeLayerAlpha: (layerName, color) => dispatch(changeLayerAlpha(layerName, color)),\r\n        checkLayerCheckbox: (value, checked) => dispatch(checkLayerCheckbox(value, checked)),\r\n        changeTimelineVisibility: (value) => dispatch(changeTimelineVisibility(value))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersControls);\r\n","import React, {Component} from 'react'\r\nimport { Collapse, Button, Card, CardTitle, CardText } from 'reactstrap';\r\nimport LayersControls from './LayersControls';\r\nimport { connect } from 'react-redux';\r\n\r\nclass ToolPanel extends Component {\r\n\r\n    state = {\r\n        collapse: false\r\n    }\r\n\r\n   //Changing state of collapse if toolpanel is expanded or not.\r\n   toggleCollapseLayersList = () => {\r\n        this.setState({ \r\n            collapse: !this.state.collapse });\r\n    }\r\n\r\n    render() {\r\n        const { checkboxes } = this.props;\r\n\r\n        //Rendering controls only when layers from database are downloaded and ready.\r\n        if (!checkboxes) {\r\n            return (\r\n                <Card body className='layers-card'>\r\n                    <CardTitle>HISTORIC WATER</CardTitle>\r\n                    <CardText>Historyczna hydrografia Krakowa</CardText>\r\n                    <Button \r\n                        color=\"primary\" \r\n                        onClick={this.toggleCollapseLayersList} \r\n                        style={{ marginBottom: '1rem' }}\r\n                        disabled={true}>\r\n                        {this.state.collapse ? 'Ukryj listę warstw' : 'Pokaż listę warstw'}\r\n                    </Button>\r\n                </Card> \r\n            )} else {\r\n                return (\r\n                    <Card body className='layers-card'>\r\n                        <CardTitle>HISTORIC WATER</CardTitle>\r\n                        <CardText>Historyczna hydrografia Krakowa</CardText>\r\n                        <Button \r\n                            color=\"primary\" \r\n                            onClick={this.toggleCollapseLayersList} \r\n                            style={{ marginBottom: '1rem' }}>\r\n                            {this.state.collapse ? 'Ukryj listę warstw' : 'Pokaż listę warstw'}\r\n                        </Button>\r\n                        <Collapse isOpen={this.state.collapse}>\r\n                            <LayersControls />\r\n                        </Collapse>\r\n                    </Card> \r\n                );\r\n            }\r\n            \r\n        }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        checkboxes: state.polyLayers.checkboxes\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ToolPanel);","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport VectorLayers from './components/VectorLayers'\r\nimport Footer from './components/Footer'\r\nimport ToolPanel from './components/ToolPanel';\r\nimport { Map, TileLayer} from 'react-leaflet';\r\n\r\nclass App extends Component {\r\n\r\n    state = {\r\n        location: {\r\n            lat: 50.06,\r\n            lng: 19.94,\r\n        },\r\n        zoom: 13.5\r\n    }\r\n\r\n    render() {\r\n        const position = [this.state.location.lat, this.state.location.lng];\r\n        return (               \r\n            <div className='map'>\r\n                <Map className='map' center={ position } zoom={ this.state.zoom }>\r\n                    <TileLayer className='main-map'\r\n                        url='https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png'\r\n                        attribution='Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a> \r\n                            &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                        opacity='1'\r\n                    />\r\n                    <VectorLayers /> \r\n                </Map>\r\n                <ToolPanel/>\r\n                <Footer />  \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import update from 'immutability-helper';\r\n\r\n//Returning base props for vector layers (color, visibility(checkbox: false))\r\nconst getLayersProperties = (layers) => {\r\n    const baseColor = {r: 50, g: 50, b: 255, a: 1}\r\n    \r\n    //checking if layers exists\r\n    if (!layers || !layers.length) return {};\r\n\r\n    //empty new state\r\n    const layerProps = {}\r\n    \r\n    //filling newState\r\n    layers.forEach((layer) => {\r\n        layerProps.colors = {\r\n            ...layerProps.colors,\r\n            [layer.properties.year]: baseColor\r\n        }\r\n        layerProps.checkboxes = {\r\n            ...layerProps.checkboxes,\r\n            [layer.properties.year]: false\r\n        }\r\n    })\r\n\r\n    //add flood_marks checkbox\r\n    layerProps.checkboxes.flood_marks_check = false;\r\n\r\n    return layerProps\r\n}\r\n\r\nconst polyLayersReducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n        case 'GET_POLYGON_LAYERS_SUCCESS':\r\n            console.log('Downloading polygon layers from the database successfully completed.')\r\n            return {\r\n                ...state,\r\n                layers: action.layers\r\n            }\r\n        case 'SET_LAYER_COLOR': \r\n            const newColor = update(state.colors, {\r\n                [action.layer_name]: {\r\n                        r: {$set: action.color.rgb.r},\r\n                        g: {$set: action.color.rgb.g},\r\n                        b: {$set: action.color.rgb.b},\r\n                    }\r\n            })\r\n            return {\r\n                ...state,\r\n                colors: newColor\r\n            }\r\n        case 'SET_LAYER_ALPHA':\r\n            const newAlpha = update(state.colors, {\r\n                [action.layer_name]: {\r\n                    a: {$set: action.color.rgb.a}\r\n                }\r\n            })\r\n            return {\r\n                ...state,\r\n                colors: newAlpha\r\n            }\r\n        case 'CHECK_LAYER_CHECKBOX':\r\n            return {\r\n                ...state,\r\n                checkboxes: {\r\n                    ...state.checkboxes,\r\n                    [action.target_value]: action.target_checked\r\n                }\r\n            }\r\n        case 'SET_BASE_PROPS':\r\n            return {\r\n                ...state,\r\n                ...getLayersProperties(state.layers)\r\n            }\r\n        default: \r\n            if(action.err) console.log(action.err);\r\n            return {\r\n                ...state\r\n            } \r\n    }\r\n}\r\n\r\nexport default polyLayersReducer","const initState = {\r\n    timeline: {\r\n        visible: false,\r\n        value: 0,\r\n        prev_value: 0,\r\n        current_date: '1593-07-03'\r\n    }\r\n}\r\n\r\n//returning sorted set of floods dates\r\nconst getArrayOfFloodDates = (objectsWithDates) => {\r\n    const unsortedSet = new Set()\r\n    objectsWithDates.forEach((object) => {\r\n        unsortedSet.add(object.properties.flood_date)\r\n    })\r\n    return Array.from(unsortedSet).sort();\r\n}\r\n\r\nconst floodMarksReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case 'GET_FLOOD_MARKS_SUCCESS':\r\n            console.log('Downloading flood marks from the database successfully completed.')\r\n            return {\r\n                ...state,\r\n                flood_marks: action.flood_marks\r\n            }\r\n        case 'SET_FLOOD_DATES':\r\n            return {\r\n                ...state,\r\n                flood_dates: getArrayOfFloodDates(state.flood_marks)\r\n            }\r\n        case 'SET_TIMELINE_VALUES': \r\n            return {\r\n                ...state,\r\n                timeline: {\r\n                    ...state.timeline,\r\n                    value: action.newValueTimeline,\r\n                    prev_value: state.valueTimeline,\r\n                    current_date: state.flood_dates[action.newValueTimeline]\r\n                }\r\n            }\r\n\r\n        case 'TIMELINE_VISIBILE':\r\n            return {\r\n                ...state,\r\n                timeline: {\r\n                    ...state.timeline,\r\n                    visible: true\r\n                }\r\n            }\r\n        case 'TIMELINE_INVISIBILE':\r\n            return {\r\n                ...state,\r\n                timeline: {\r\n                    ...state.timeline,\r\n                    visible: false\r\n                }\r\n            }\r\n        case 'SET_FLOODS_DATES':\r\n            return {\r\n                ...state,\r\n                floods_dates: getArrayOfFloodDates(state.flood_marks)\r\n            }\r\n        default:\r\n            if(action.err) console.log(action.err);\r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}\r\n\r\nexport default floodMarksReducer","import polyLayersReducer from './polyLayersReducer'\r\nimport floodMarksReducer from './floodMarksReducer'\r\nimport { combineReducers } from 'redux'\r\n\r\nconst rootReducer = combineReducers({\r\n    polyLayers: polyLayersReducer,\r\n    floodMarks: floodMarksReducer\r\n});\r\n\r\nexport default rootReducer","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport rootReducer from './store/reducers/rootReducer'\r\nimport thunk from 'redux-thunk'\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}